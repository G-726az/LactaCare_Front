<div class="modal-overlay" (click)="onClose()">
  <div class="modal-container report-modal" (click)="$event.stopPropagation()" id="report-content">
    <div class="modal-header">
      <div class="modal-icon">
        <i class="fas fa-file-medical-alt"></i>
      </div>
      <h2>Reporte Médico</h2>
      <button class="close-btn" (click)="onClose()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="modal-body">
      <div class="report-header">
        <div class="logo-section">
          <i class="fas fa-heartbeat fa-2x"></i>
          <h3>LactaCare</h3>
          <p>Sistema Médico de Lactarios</p>
        </div>
        
        <div class="report-info">
          <h4>REPORTE MÉDICO</h4>
        <p class="report-date">{{ reportData?.fecha ? (reportData.fecha | date:'dd/MM/yyyy') : (today | date:'dd/MM/yyyy') }}</p>
        </div>
      </div>
      
      <div class="doctor-info">
        <div class="info-card">
          <i class="fas fa-user-md"></i>
          <div>
            <h5>Médico Responsable</h5>
            <p>{{ reportData?.medico || 'Dr. Carlos Alberto Ruiz Méndez' }}</p>
          </div>
        </div>
        
        <div class="info-card">
          <i class="fas fa-calendar-alt"></i>
          <div>
            <h5>Fecha de Generación</h5>
            <p>{{ today | date:'dd/MM/yyyy HH:mm' }}</p>
          </div>
        </div>
      </div>
      
      <div class="stats-grid">
        <h3><i class="fas fa-chart-bar"></i> ESTADÍSTICAS</h3>
        
        <div class="stats-cards">
          <div class="stat-card">
            <div class="stat-icon lactarios">
              <i class="fas fa-baby"></i>
            </div>
            <div class="stat-content">
              <h4>{{ reportData?.lactariosActivos || '2' }}</h4>
              <p>Lactarios activos</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon refrigeradores">
              <i class="fas fa-thermometer-half"></i>
            </div>
            <div class="stat-content">
              <h4>{{ reportData?.refrigeradores || '3' }}</h4>
              <p>Refrigeradores</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon temperatura">
              <i class="fas fa-temperature-low"></i>
            </div>
            <div class="stat-content">
              <h4>{{ reportData?.temperaturaPromedio || '4.5°C' }}</h4>
              <p>Temperatura promedio</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon alertas">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="stat-content">
              <h4>{{ reportData?.alertasActivas || '1' }}</h4>
              <p>Alerta activa</p>
            </div>
          </div>
        </div>
      </div>
      
      <div class="detailed-stats">
        <div class="section">
          <h4><i class="fas fa-info-circle"></i> Información Detallada</h4>
          <table class="detailed-table">
            <thead>
              <tr>
                <th>Refrigerador</th>
                <th>Temperatura Actual</th>
                <th>Estado</th>
                <th>Última Medición</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Refrigerador #1</td>
                <td class="temp-ok">4.0°C</td>
                <td><span class="badge-ok">Óptimo</span></td>
                <td>{{ today | date:'HH:mm' }}</td>
              </tr>
              <tr>
                <td>Refrigerador #2</td>
                <td class="temp-ok">4.5°C</td>
                <td><span class="badge-ok">Óptimo</span></td>
                <td>{{ today | date:'HH:mm' }}</td>
              </tr>
              <tr>
                <td>Refrigerador #3</td>
                <td class="temp-warning">6.2°C</td>
                <td><span class="badge-warning">Alerta</span></td>
                <td>{{ today | date:'HH:mm' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <div class="notes-section">
        <h4><i class="fas fa-clipboard-list"></i> Observaciones</h4>
        <div class="notes-content">
          <p>• Sistema operando dentro de parámetros normales</p>
          <p>• Una alerta detectada en Refrigerador #3</p>
          <p>• Temperatura promedio dentro del rango aceptable</p>
          <p>• Capacidad de almacenamiento: 75% utilizada</p>
        </div>
      </div>
      
      <div class="footer-notes">
        <p><i class="fas fa-shield-alt"></i> Este es un documento oficial del Sistema LactaCare</p>
        <p class="signature">Firma digital: {{ reportData?.medico || 'Dr. Carlos Alberto Ruiz Méndez' }}</p>
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="btn-secondary" (click)="onClose()">
        <i class="fas fa-times"></i> Cerrar
      </button>
      <button class="btn-primary" (click)="exportToPDF()">
        <i class="fas fa-file-pdf"></i> Exportar a PDF
      </button>
      <button class="btn-success" (click)="printReport()">
        <i class="fas fa-print"></i> Imprimir Reporte
      </button>
    </div>
  </div>
</div>