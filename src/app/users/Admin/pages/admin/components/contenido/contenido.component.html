<div class="contenido-container">
  <div class="section-header">
    <h2>Gesti√≥n de Contenido</h2>
    <button class="btn-primary" (click)="abrirModalNuevo()">
      ‚ûï Nuevo Art√≠culo
    </button>
  </div>

  <!-- FILTROS -->
  <div class="filtros-section">
    <input 
      type="text" 
      placeholder="üîç Buscar contenido..." 
      [(ngModel)]="busqueda"
      (input)="filtrarContenido()"
      aria-label="Buscar contenido"
    >
    <select [(ngModel)]="estadoFiltro" (change)="filtrarContenido()" aria-label="Filtrar por estado">
      <option value="">Todos los estados</option>
      <option value="Publicado">Publicado</option>
      <option value="Borrador">Borrador</option>
    </select>
  </div>

  <!-- TABLA DE CONTENIDO -->
  <div class="tabla-container">
    <table class="tabla-contenido">
      <thead>
        <tr>
          <th>ID</th>
          <th>T√≠tulo</th>
          <th>Categor√≠a</th>
          <th>Fecha</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (item of contenidoFiltrado; track item.id) {
          <tr>
            <td>{{ item.id }}</td>
            <td>{{ item.titulo }}</td>
            <td><span class="badge-categoria">{{ item.categoria }}</span></td>
            <td>{{ item.fecha | date:'dd/MM/yyyy' }}</td>
            <td>
              <span 
                class="estado-badge" 
                [class.activo]="item.estado === 'Publicado'"
                [class.inactivo]="item.estado === 'Borrador'"
              >
                {{ item.estado }}
              </span>
            </td>
            <td>
              <button class="btn-icon" (click)="editarContenido(item)" title="Editar">‚úèÔ∏è</button>
              <button class="btn-icon" (click)="eliminarContenido(item.id)" title="Eliminar">üóëÔ∏è</button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- MODAL PARA CREAR/EDITAR -->
  @if (mostrarModal) {
    <div class="modal-overlay" (click)="cerrarModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <h3>{{ modoEdicion ? 'Editar' : 'Nuevo' }} Art√≠culo</h3>
        
        <div class="form-group">
          <label>T√≠tulo *</label>
          <input type="text" [(ngModel)]="contenidoActual.titulo" placeholder="T√≠tulo del art√≠culo">
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Categor√≠a *</label>
            <input type="text" [(ngModel)]="contenidoActual.categoria" placeholder="Ej: Educaci√≥n, Gu√≠a, Informaci√≥n">
          </div>

          <div class="form-group">
            <label>Tipo</label>
            <select [(ngModel)]="contenidoActual.tipo" aria-label="Tipo de contenido">
              <option value="Art√≠culo">Art√≠culo</option>
              <option value="Tutorial">Tutorial</option>
              <option value="Aviso">Aviso</option>
              <option value="Noticia">Noticia</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>Descripci√≥n</label>
          <textarea [(ngModel)]="contenidoActual.descripcion" rows="4" placeholder="Descripci√≥n breve"></textarea>
        </div>

        <div class="form-group">
          <label>Contenido Completo</label>
          <textarea [(ngModel)]="contenidoActual.contenido" rows="8" placeholder="Contenido del art√≠culo"></textarea>
        </div>

        <div class="form-group">
          <label>Estado</label>
          <select [(ngModel)]="contenidoActual.estado" aria-label="Estado del contenido">
            <option value="Borrador">Borrador</option>
            <option value="Publicado">Publicado</option>
          </select>
        </div>

        <div class="modal-actions">
          <button class="btn-secondary" (click)="cerrarModal()">Cancelar</button>
          <button class="btn-primary" (click)="guardarContenido()">Guardar</button>
        </div>
      </div>
    </div>
  }
</div>