<div class="salas-container">
  <div class="content-header">
    <h1>ğŸ¥ Salas de Lactancia Disponibles</h1>
  </div>

  <!-- FILTROS -->
  <div class="filtros-section">
    <button 
      class="filtro-btn"
      [class.active]="filtroDisponibilidad === 'Todas'"
      (click)="filtroDisponibilidad = 'Todas'">
      ğŸ¥ Todas las Salas
    </button>
    <button 
      class="filtro-btn disponible"
      [class.active]="filtroDisponibilidad === 'Disponibles'"
      (click)="filtroDisponibilidad = 'Disponibles'">
      âœ… Disponibles
    </button>
    <button 
      class="filtro-btn ocupada"
      [class.active]="filtroDisponibilidad === 'Ocupadas'"
      (click)="filtroDisponibilidad = 'Ocupadas'">
      ğŸ”´ Ocupadas
    </button>
  </div>

  <!-- GRID DE SALAS -->
  <div class="content-body">
    <div class="salas-grid">
      <div 
        *ngFor="let sala of salasFiltradas" 
        class="sala-card hoverable"
        [ngClass]="getDisponibilidadClass(sala)">
        
        <!-- Imagen de la sala -->
        <div class="sala-image" *ngIf="sala.Imagen">
          <img [src]="sala.Imagen" [alt]="sala.Nombre_CMedico" />
          <button 
            class="btn-favorito"
            (click)="marcarFavorito(sala)"
            [class.favorita]="esFavorita(sala)">
            {{ esFavorita(sala) ? 'ğŸ’–' : 'ğŸ¤' }}
          </button>
        </div>
        
        <div class="sala-header">
          <h3>{{ sala.Nombre_CMedico }}</h3>
          <div class="calificacion">
            {{ generarEstrellas(sala.Calificacion) }}
            <span class="numero">{{ sala.Calificacion }}</span>
          </div>
          <span 
            class="status-badge" 
            [class.disponible]="sala.Disponible"
            [class.no-disponible]="!sala.Disponible">
            {{ sala.Disponible ? 'âœ… Disponible' : 'âŒ Ocupada' }}
          </span>
        </div>
        
        <div class="sala-body">
          <div class="info-item">
            <span class="icon">ğŸ“</span>
            <div class="info-content">
              <span class="label">DirecciÃ³n</span>
              <span class="value">{{ sala.Direccion_CMedico }}</span>
            </div>
          </div>
          
          <div class="info-item">
            <span class="icon">ğŸ“</span>
            <div class="info-content">
              <span class="label">TelÃ©fono</span>
              <span class="value">{{ sala.Telefono_CMedico }}</span>
            </div>
          </div>
          
          <div class="info-item">
            <span class="icon">ğŸ•</span>
            <div class="info-content">
              <span class="label">Horario</span>
              <span class="value">{{ sala.Horario_CMedico }}</span>
            </div>
          </div>
          
          <div class="info-item capacidad">
            <span class="icon">ğŸ‘¥</span>
            <div class="info-content">
              <span class="label">Disponibilidad</span>
              <span class="value" [ngClass]="getDisponibilidadClass(sala)">
                {{ getDisponibilidadTexto(sala) }}
              </span>
              <div class="progress-bar">
                <div 
                  class="progress-fill" 
                  [style.width.%]="((sala.Capacidad - sala.Ocupadas) / sala.Capacidad) * 100">
                </div>
              </div>
            </div>
          </div>

          <!-- Servicios -->
          <div class="servicios">
            <h4>Servicios:</h4>
            <div class="servicios-tags">
              <span *ngFor="let servicio of sala.Servicios" class="servicio-tag">
                {{ servicio }}
              </span>
            </div>
          </div>
        </div>

        <div class="sala-footer">
          <button 
            class="btn-primary" 
            (click)="reservarSala(sala)"
            [disabled]="!sala.Disponible">
            {{ sala.Disponible ? 'ğŸ“… Reservar' : 'ğŸš« No disponible' }}
          </button>
          
          <div class="btn-group">
            <button class="btn-secondary" (click)="verMapa(sala)" title="Ver en mapa">
              ğŸ—ºï¸
            </button>
            <button class="btn-secondary" (click)="llamarSala(sala)" title="Llamar">
              ğŸ“
            </button>
            <button class="btn-secondary" (click)="verDetalle(sala)" title="Ver detalles">
              â„¹ï¸
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Estado vacÃ­o -->
    <div class="empty-state" *ngIf="salasFiltradas.length === 0">
      <div class="empty-icon">ğŸ¥</div>
      <h3>No hay salas {{ filtroDisponibilidad.toLowerCase() }}</h3>
      <p>Intenta cambiar el filtro para ver mÃ¡s opciones</p>
    </div>
  </div>

  <!-- MODAL DETALLE -->
  <div class="modal-overlay" *ngIf="mostrarDetalle" (click)="cerrarDetalle()">
    <div class="modal-content detalle-sala" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>{{ salaSeleccionada?.Nombre_CMedico }}</h3>
        <button class="btn-close" (click)="cerrarDetalle()">âœ•</button>
      </div>
      
      <div class="modal-body" *ngIf="salaSeleccionada">
        <!-- Imagen grande -->
        <div class="imagen-grande" *ngIf="salaSeleccionada.Imagen">
          <img [src]="salaSeleccionada.Imagen" [alt]="salaSeleccionada.Nombre_CMedico" />
        </div>

        <!-- CalificaciÃ³n -->
        <div class="detalle-calificacion">
          <span class="estrellas">{{ generarEstrellas(salaSeleccionada.Calificacion) }}</span>
          <span class="numero">{{ salaSeleccionada.Calificacion }} / 5.0</span>
        </div>

        <!-- InformaciÃ³n completa -->
        <div class="detalle-info">
          <div class="detalle-item">
            <strong>ğŸ“ DirecciÃ³n:</strong>
            <p>{{ salaSeleccionada.Direccion_CMedico }}</p>
          </div>

          <div class="detalle-item">
            <strong>ğŸ“ TelÃ©fono:</strong>
            <p>{{ salaSeleccionada.Telefono_CMedico }}</p>
          </div>

          <div class="detalle-item">
            <strong>ğŸ• Horario:</strong>
            <p>{{ salaSeleccionada.Horario_CMedico }}</p>
          </div>

          <div class="detalle-item">
            <strong>ğŸ‘¥ Capacidad:</strong>
            <p>{{ salaSeleccionada.Ocupadas }}/{{ salaSeleccionada.Capacidad }} ocupadas</p>
          </div>

          <div class="detalle-item">
            <strong>âœ¨ Servicios incluidos:</strong>
            <ul class="servicios-lista">
              <li *ngFor="let servicio of salaSeleccionada.Servicios">
                âœ“ {{ servicio }}
              </li>
            </ul>
          </div>
        </div>

        <!-- Botones de acciÃ³n -->
        <div class="detalle-acciones">
          <button 
            class="btn-primary btn-large" 
            (click)="reservarSala(salaSeleccionada); cerrarDetalle()"
            [disabled]="!salaSeleccionada.Disponible">
            {{ salaSeleccionada.Disponible ? 'ğŸ“… Reservar Ahora' : 'ğŸš« No disponible' }}
          </button>
          
          <button class="btn-secondary btn-large" (click)="verMapa(salaSeleccionada)">
            ğŸ—ºï¸ Ver en Google Maps
          </button>
          
          <button class="btn-secondary btn-large" (click)="llamarSala(salaSeleccionada)">
            ğŸ“ Llamar a la Sala
          </button>
        </div>
      </div>
    </div>
  </div>
</div>