<div class="perfil-container">
  <div class="content-header">
    <h1>ğŸ‘¤ Mi Perfil</h1>
    <button class="btn-edit" (click)="toggleEditMode()" *ngIf="!editMode">
      âœï¸ Editar Perfil
    </button>
  </div>

  <div class="content-body">
    <div class="perfil-card">
      <!-- HEADER DEL PERFIL -->
      <div class="perfil-header">
        <div class="profile-image-wrapper">
          <img [src]="pacienteData.foto" alt="Foto de perfil" class="profile-image">
          <button class="btn-change-photo" (click)="cambiarFoto()" title="Cambiar foto">
            ğŸ“·
          </button>
        </div>
        <div class="profile-info">
          <h2>{{ pacienteData.nombreCompleto }}</h2>
          <p class="rol-badge">{{ pacienteData.rol || 'Madre Lactante' }}</p>
          <p class="edad-info" *ngIf="pacienteData.Fecha_nacimiento_paciente">
            ğŸ‚ {{ calcularEdad() }} aÃ±os
          </p>
        </div>
      </div>

      <!-- BODY DEL PERFIL -->
      <div class="perfil-body">
        <!-- CÃ©dula -->
        <div class="info-row">
          <label>
            <span class="label-icon">ğŸªª</span>
            CÃ©dula:
          </label>
          <input 
            type="text" 
            [(ngModel)]="pacienteData.Cedula_paciente" 
            [disabled]="!editMode" 
            class="form-input"
            [class.error]="errores['cedula']"
            maxlength="10">
          <span class="error-message" *ngIf="errores['cedula']">{{ errores['cedula'] }}</span>
        </div>

        <!-- Nombre -->
        <div class="info-row">
          <label>
            <span class="label-icon">ğŸ‘¤</span>
            Nombre:
          </label>
          <input 
            type="text" 
            [(ngModel)]="pacienteData.Nombre_paciente" 
            [disabled]="!editMode" 
            class="form-input"
            [class.error]="errores['nombre']">
          <span class="error-message" *ngIf="errores['nombre']">{{ errores['nombre'] }}</span>
        </div>

        <!-- Apellido -->
        <div class="info-row">
          <label>
            <span class="label-icon">ğŸ‘¤</span>
            Apellido:
          </label>
          <input 
            type="text" 
            [(ngModel)]="pacienteData.Apellido_paciente" 
            [disabled]="!editMode" 
            class="form-input"
            [class.error]="errores['apellido']">
          <span class="error-message" *ngIf="errores['apellido']">{{ errores['apellido'] }}</span>
        </div>

        <!-- Email -->
        <div class="info-row">
          <label>
            <span class="label-icon">ğŸ“§</span>
            Email:
          </label>
          <input 
            type="email" 
            [(ngModel)]="pacienteData.Email_paciente" 
            [disabled]="!editMode" 
            class="form-input"
            [class.error]="errores['email']">
          <span class="error-message" *ngIf="errores['email']">{{ errores['email'] }}</span>
        </div>

        <!-- TelÃ©fono -->
        <div class="info-row">
          <label>
            <span class="label-icon">ğŸ“±</span>
            TelÃ©fono:
          </label>
          <input 
            type="tel" 
            [(ngModel)]="pacienteData.Telefono_paciente" 
            [disabled]="!editMode" 
            class="form-input"
            [class.error]="errores['telefono']">
          <span class="error-message" *ngIf="errores['telefono']">{{ errores['telefono'] }}</span>
        </div>

        <!-- DirecciÃ³n -->
        <div class="info-row">
          <label>
            <span class="label-icon">ğŸ“</span>
            DirecciÃ³n:
          </label>
          <input 
            type="text" 
            [(ngModel)]="pacienteData.Direccion_paciente" 
            [disabled]="!editMode" 
            class="form-input">
        </div>

        <!-- Fecha de Nacimiento -->
        <div class="info-row" *ngIf="editMode">
          <label>
            <span class="label-icon">ğŸ‚</span>
            Fecha de Nacimiento:
          </label>
          <input 
            type="date" 
            [ngModel]="pacienteData.Fecha_nacimiento_paciente | date:'yyyy-MM-dd'" 
            (ngModelChange)="pacienteData.Fecha_nacimiento_paciente = $event"
            [disabled]="!editMode" 
            class="form-input">
        </div>
      </div>

      <!-- FOOTER DEL PERFIL -->
      <div class="perfil-footer" *ngIf="editMode">
        <button class="btn-save" (click)="guardarCambios()">
          ğŸ’¾ Guardar Cambios
        </button>
        <button class="btn-cancel" (click)="cancelarEdicion()">
          âœ– Cancelar
        </button>
      </div>

      <!-- INFORMACIÃ“N ADICIONAL (solo vista) -->
      <div class="info-adicional" *ngIf="!editMode">
        <div class="info-card">
          <h4>ğŸ“Š EstadÃ­sticas</h4>
          <p>â€¢ Extracciones registradas: <strong>45</strong></p>
          <p>â€¢ Reservas realizadas: <strong>12</strong></p>
          <p>â€¢ Ãšltima visita: <strong>Hoy</strong></p>
        </div>
      </div>
    </div>
  </div>
</div>